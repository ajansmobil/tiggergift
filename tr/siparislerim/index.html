<!doctype html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Page-Exit" content="BlendTrans(Duration"="0)" />
  <meta http-equiv="Page-Enter" content="BlendTrans(Duration"="0)" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
  <meta http-equiv="Cache-Control" content="max-age=3600, public" />
  <meta http-equiv="Pragma" content="cache" />
  <meta http-equiv="Expires" content="3600" />
  <title>Siparişlerim</title>
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <meta property="og:title" content="Siparişlerim" />
  <meta property="og:description" content="" />
  <meta property="og:image" content="https://tiggergift.com/img/icon.png" />
  <meta name="robots" content="index, follow" />


  <link rel="stylesheet" href="/src/rubik.css" />
  <link rel="stylesheet" href="/src/css.css?v=oox6t" />
  <link rel="shortcut icon" href="/img/icon.png?v=oox6t" type="image/png" />

  <link rel="stylesheet" href="/src/swiper-bundle.min.css" />
  <script src="/src/swiper-bundle.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-functions.js"></script>



<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBW1jNJSUMgje8ZQ_jdT0Kbge9bnOZrlfs",
    authDomain: "tiggergiftcom.firebaseapp.com",
    projectId: "tiggergiftcom",
    storageBucket: "tiggergiftcom.firebasestorage.app",
    messagingSenderId: "869071434601",
    appId: "1:869071434601:web:292f989d265a4a88a6c3f8"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>


  <script type="text/javascript" src="/src/firebase.js?v=oox6t"></script>
<link rel="stylesheet" href="style.css?v=oox6t">
</head>

<body>
  <div id="header"><header class="bgu2u-header-wrapper">
  <div class="bgu2u-header">
    <div class="bgu2u-header-top">
      <a href="/tr/" class="bgu2u-header-left">
        <img src="/img/logo.png?v=oox6t" alt="Tiggergift Logo" class="bgu2u-logo" />
      </a>

      <div class="bgu2u-search-box">
        <span class="material-symbols-outlined">search</span>
        <input type="text" placeholder="Ürün ara..." />
        <button>Ara</button>
      </div>

      <div class="bgu2u-support-info">
        <span class="material-symbols-outlined">headphones</span>
        <div>
          <small>7/24 Destek</small>
          <strong>0342 343 82 12</strong>
        </div>
      </div>

      <div class="bgu2u-icons">
        <a href="/tr/login/" class="material-symbols-outlined">person</a>
        <a href="/tr/favorilerim/" class="material-symbols-outlined">favorite</a>
        <a href="/tr/basket/" class="material-symbols-outlined">shopping_cart</a>
      </div>
    </div>
  </div>

  <div class="bgu2u-header-bottom">
    <div class="bgu2u-header-bottom-inner">
      <button class="bgu2u-category-btn">
        <span class="material-symbols-outlined">menu</span> Kategoriler
      </button>
      <nav class="bgu2u-main-menu"><a href="/tr/bakir-mutfak-esyalari/">Bakır Mutfak Eşyaları</a><a href="/tr/bakir-aksesuarlar/">Bakır Aksesuarlar</a><a href="/tr/ehli-keyf/">Ehli Keyf</a><a href="/tr/urunlerimiz/">Kampanyalı</a><a href="/tr/yerelurunler/">Yerel Ürünler</a><a href="/tr/kurumsal/">Kurumsal</a><a href="/tr/iletisim/">İletişim</a></nav>
    </div>
  </div>
</header>


</div>
  <div id="content"><!-- Loading Screen -->
<div class="admin-loading-overlay" id="adminLoadingOverlay">
  <div class="admin-loading-content">
    <div class="admin-loading-spinner"></div>
    <div class="admin-loading-text">Giriş kontrol ediliyor...</div>
  </div>
</div>

<!-- Main Content -->
<div class="pubth" id="adminMainContent" style="display: none;">
  <div class="pubth-menu">
    <a href="/tr/user/" class="pubth-profile">
      <div class="pubth-user-img" id="userAvatar"></div>
      <div id="userName">Yükleniyor...</div>
    </a>
    <div class="pubth-menu-category">
    <a href="/tr/sepetim/" >
      <span class="material-symbols-outlined">shopping_basket</span>
      <div>Sepetim</div>
    </a>
    <a class="pubth-menu-active" href="/tr/siparislerim/" >
      <span class="material-symbols-outlined">shopping_cart</span>
      <div>Siparişlerim</div>
    </a>
    <a href="/tr/favorilerim/" >
      <span class="material-symbols-outlined">favorite</span>
      <div>Favorilerim</div>
    </a>
    <a href="/tr/bildirimler/" >
      <span class="material-symbols-outlined">notifications</span>
      <div>Bildirimler</div>
    </a>
    <a href="/tr/mesajlar/" >
      <span class="material-symbols-outlined">message</span>
      <div>Mesajlar</div>
    </a>
    <a href="/tr/degerlendirmelerim/" >
      <span class="material-symbols-outlined">stars</span>
      <div>Değerlendirmelerim</div>
    </a>
    <a href="/tr/adreslerim/" >
      <span class="material-symbols-outlined">location_on</span>
      <div>Adreslerim</div>
    </a>
    <a href="/tr/kredikartlarim/" >
      <span class="material-symbols-outlined">credit_card</span>
      <div>Kredi Kartlarım</div>
    </a>
    <a href="/tr/faturalarim/" >
      <span class="material-symbols-outlined">receipt</span>
      <div>Faturalarım</div>
    </a>
    <a href="/tr/iadevedegisim/" >
      <span class="material-symbols-outlined">swap_horiz</span>
      <div>İade ve Değişim</div>
    </a>
    <a href="/tr/cuzdanim/" >
      <span class="material-symbols-outlined">account_balance_wallet</span>
      <div>Cüzdanım</div>
    </a>
    <a href="/tr/cozummerkezi/" >
      <span class="material-symbols-outlined">support</span>
      <div>Çözüm Merkezi</div>
    </a>
    <a href="/tr/kuponlarim/" >
      <span class="material-symbols-outlined">local_offer</span>
      <div>Kuponlarım</div>
    </a>
    <a href="/tr/iletisimtercihlerim/" >
      <span class="material-symbols-outlined">settings</span>
      <div>İletişim Tercihlerim</div>
    </a>
    <a href="/tr/kullanicibilgilerim/" >
      <span class="material-symbols-outlined">person</span>
      <div>Kullanıcı Bilgilerim</div>
    </a>
    <a href="/tr/uyecikis/" >
      <span class="material-symbols-outlined">exit_to_app</span>
      <div>Üye Çıkış</div>
    </a>
    <a href="/tr/odeme/" >
      <span class="material-symbols-outlined">home</span>
      <div>Ödeme</div>
    </a></div>
  </div>
  <div class="pubth-body"><div class="gmesu">
  <div class="gmesuTitle">
    <span class="material-symbols-outlined">shopping_bag</span>
    Siparişlerim
  </div>
  <div class="gmesuBody">
    <div class="orders-container">
      <div class="orders-filter">
        <div class="filter-row">
          <div class="search-group">
            <label for="search-input">Arama:</label>
            <div class="search-input-wrapper">
              <span class="material-symbols-outlined search-icon">search</span>
              <input type="text" id="search-input" class="search-input"
                placeholder="Sipariş no, ürün adı, satıcı ara...">
              <button class="clear-search-btn" id="clear-search" onclick="clearSearch()" style="display: none;">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
          </div>

          <div class="filter-group">
            <label for="status-filter">Durum Filtresi:</label>
            <select class="filter-select" id="status-filter">
              <option value="all">Tüm Durumlar</option>
              <option value="pending">Hazırlanıyor</option>
              <option value="processing">Kargoda</option>
              <option value="delivered">Teslim Edildi</option>
              <option value="cancelled">İptal Edildi</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="date-filter">Tarih Filtresi:</label>
            <select class="filter-select" id="date-filter">
              <option value="all">Tüm Siparişler</option>
              <option value="1week">Son 1 Hafta</option>
              <option value="1month">Son 1 Ay</option>
              <option value="3months">Son 3 Ay</option>
              <option value="6months">Son 6 Ay</option>
              <option value="1year">Son 1 Yıl</option>
              <option value="custom">Özel Tarih Aralığı</option>
            </select>
          </div>

          <div class="filter-actions">
            <button class="reset-filters-btn" onclick="resetAllFilters()">
              <span class="material-symbols-outlined">refresh</span>
              Filtreleri Temizle
            </button>
          </div>
        </div>

        <div class="date-range-group" id="date-range-group" style="display: none;">
          <div class="date-input-group">
            <label for="start-date">Başlangıç:</label>
            <input type="date" id="start-date" class="date-input">
          </div>
          <div class="date-input-group">
            <label for="end-date">Bitiş:</label>
            <input type="date" id="end-date" class="date-input">
          </div>
          <button class="apply-date-btn" onclick="applyDateFilter()">
            <span class="material-symbols-outlined">filter_list</span>
            Uygula
          </button>
        </div>

        <div class="filter-summary" id="filter-summary" style="display: none;">
          <span class="summary-text">Aktif filtreler:</span>
          <div class="active-filters" id="active-filters"></div>
        </div>
      </div>
      <div class="orders-list">
        <div class="order-item">
          <div class="order-header">
            <div class="order-info">
              <div class="order-date">10 Mart 2024</div>
              <div class="order-number">Sipariş No: #123456</div>
            </div>
            <div class="order-status delivered">
              <span class="material-symbols-outlined">check_circle</span>
              Teslim Edildi
            </div>
          </div>
          <div class="order-products">
            <div class="order-product">
              <div class="product-img">
                <img
                  src="https://cdn.dsmcdn.com/ty967/product/media/images/20230717/17/394487857/972401512/1/1_org_zoom.jpg" />
              </div>
              <div class="product-info">
                <div class="product-title">
                  M2k Tekno Leather Unisex Sneaker
                </div>
                <div class="product-seller">ABC Mağazası</div>
                <div class="product-price">500,00 ₺</div>
              </div>
              <div class="product-actions">
                <button class="action-button review">
                  <span class="material-symbols-outlined">rate_review</span>
                  Değerlendir
                </button>
                <button class="action-button return">
                  <span class="material-symbols-outlined">swap_horiz</span>
                  İade Et
                </button>
              </div>
            </div>
          </div>
          <div class="order-footer">
            <div class="order-total">
              <span>Toplam:</span>
              <strong>500,00 ₺</strong>
            </div>
            <div class="order-actions">
              <button class="action-button">
                <span class="material-symbols-outlined">receipt</span>
                Faturayı Görüntüle
              </button>
              <button class="action-button">
                <span class="material-symbols-outlined">local_shipping</span>
                Kargo Takip
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Demo Sipariş Ekleme Butonu - Sayfanın altında -->
      <div class="demo-actions">
        <button class="add-demo-order-btn" onclick="addDemoOrder()">
          <span class="material-symbols-outlined">add_shopping_cart</span>
          Örnek Sipariş Ekle (Test Amaçlı)
        </button>
        <p class="demo-note">
          <span class="material-symbols-outlined">info</span>
          Bu buton sadece test amaçlıdır. Gerçek uygulamada kaldırılacaktır.
        </p>
      </div>
    </div>
  </div>
</div>



<script>
  // Firebase'den sipariş verilerini çek
  async function loadOrders() {
    try {
      // Kullanıcı giriş yapmış mı kontrol et
      if (!user.isLoggedIn || !user.id) {
        const ordersList = document.querySelector('.orders-list');
        ordersList.innerHTML = '<div class="no-orders">Siparişlerinizi görmek için giriş yapmanız gerekiyor.</div>';
        return;
      }

      // Orders listesini Firebase'den çek
      const ordersSnapshot = await dataListWeb(`users/${user.id}/orders`);
      const ordersList = document.querySelector('.orders-list');

      // Mevcut demo içeriği temizle
      ordersList.innerHTML = '';

      if (ordersSnapshot.empty) {
        ordersList.innerHTML = '<div style="text-align: center; padding: 50px; color: #666;">Henüz siparişiniz bulunmuyor.</div>';
        return;
      }

      // Her sipariş için HTML oluştur
      ordersSnapshot.forEach(doc => {
        const order = doc.data();
        const orderId = doc.id;

        // Sipariş HTML şablonu
        const orderHTML = `
          <div class="order-item" data-order-id="${orderId}">
            <div class="order-header">
              <div class="order-info">
                <div class="order-date">${formatDate(order.createdAt)}</div>
                <div class="order-number">Sipariş No: #${order.orderNumber || orderId.substring(0, 6)}</div>
              </div>
              <div class="order-status ${order.status}">
                <span class="material-symbols-outlined">${getStatusIcon(order.status)}</span>
                ${getStatusText(order.status)}
              </div>
            </div>
            <div class="order-products">
              ${generateProductsHTML(order.products || [])}
            </div>
            <div class="order-footer">
              <div class="order-total">
                <span>Toplam:</span>
                <strong>${formatPrice(order.totalPrice)} ₺</strong>
              </div>
              <div class="order-actions">
                <button class="action-button" onclick="viewInvoice('${orderId}')">
                  <span class="material-symbols-outlined">receipt</span>
                  Faturayı Görüntüle
                </button>
                <button class="action-button" onclick="trackOrder('${orderId}')">
                  <span class="material-symbols-outlined">local_shipping</span>
                  Kargo Takip
                </button>
              </div>
            </div>
          </div>
        `;

        ordersList.innerHTML += orderHTML;
      });

    } catch (error) {
      console.error('Siparişler yüklenirken hata:', error);
      document.querySelector('.orders-list').innerHTML =
        '<div style="text-align: center; padding: 50px; color: #e74c3c;">Siparişler yüklenirken bir hata oluştu.</div>';
    }
  }

  // Ürünler HTML'i oluştur
  function generateProductsHTML(products) {
    return products.map(product => `
      <div class="order-product">
        <div class="product-img">
          <img src="${product.image || 'https://via.placeholder.com/100x100'}" alt="${product.name}">
        </div>
        <div class="product-info">
          <div class="product-title">${product.name}</div>
          <div class="product-seller">${product.seller || 'Bilinmeyen Satıcı'}</div>
          <div class="product-price">${formatPrice(product.price)} ₺</div>
        </div>
        <div class="product-actions">
          <button class="action-button review" onclick="reviewProduct('${product.id}')">
            <span class="material-symbols-outlined">rate_review</span>
            Değerlendir
          </button>
          <button class="action-button return" onclick="returnProduct('${product.id}')">
            <span class="material-symbols-outlined">swap_horiz</span>
            İade Et
          </button>
        </div>
      </div>
    `).join('');
  }

  // Tarih formatla
  function formatDate(timestamp) {
    if (!timestamp) return 'Tarih bilinmiyor';
    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
    return date.toLocaleDateString('tr-TR', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
  }

  // Fiyat formatla
  function formatPrice(price) {
    return new Intl.NumberFormat('tr-TR', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }).format(price || 0);
  }

  // Durum ikonu
  function getStatusIcon(status) {
    const icons = {
      'delivered': 'check_circle',
      'processing': 'local_shipping',
      'pending': 'hourglass_empty',
      'cancelled': 'cancel',
      'preparing': 'schedule'
    };
    return icons[status] || 'help';
  }

  // Durum metni
  function getStatusText(status) {
    const texts = {
      'delivered': 'Teslim Edildi',
      'processing': 'Kargoda',
      'pending': 'Hazırlanıyor',
      'cancelled': 'İptal Edildi',
      'preparing': 'Hazırlanıyor'
    };
    return texts[status] || 'Bilinmeyen Durum';
  }

  // Örnek sipariş ekleme fonksiyonu
  async function addDemoOrder() {
    // Kullanıcı giriş yapmış mı kontrol et
    if (!user.isLoggedIn || !user.id) {
      showNotification('Demo sipariş eklemek için giriş yapmanız gerekiyor.', 'error');
      return;
    }

    const demoProducts = [
      {
        id: "demo_" + Date.now() + "_1",
        name: "Nike Air Max 270",
        price: 1299.99,
        image: "https://cdn.dsmcdn.com/ty967/product/media/images/20230717/17/394487857/972401512/1/1_org_zoom.jpg",
        seller: "Nike Store"
      },
      {
        id: "demo_" + Date.now() + "_2",
        name: "Adidas Ultra Boost",
        price: 899.50,
        image: "https://assets.adidas.com/images/h_840,f_auto,q_auto,fl_lossy,c_fill,g_auto/fbaf991a78bc4896a3e9ad7800abcec6_9366/Ultraboost_22_Ayakkabi_Siyah_GZ0127_01_standard.jpg",
        seller: "Adidas Official"
      }
    ];

    const demoOrder = {
      createdAt: new Date(),
      orderNumber: "DEMO" + Date.now().toString().slice(-6),
      status: "pending",
      totalPrice: demoProducts.reduce((sum, product) => sum + product.price, 0),
      products: demoProducts,
      shippingAddress: "Demo Adres, İstanbul",
      paymentMethod: "Kredi Kartı"
    };

    try {
      // Firebase'e örnek sipariş ekle
      await dataAddWeb(`users/${user.id}/orders`, demoOrder);

      // Başarı mesajı göster
      showNotification('Örnek sipariş başarıyla eklendi!', 'success');

      // Siparişleri yeniden yükle
      setTimeout(() => {
        loadOrders();
      }, 1000);

    } catch (error) {
      console.error('Örnek sipariş eklenirken hata:', error);
      showNotification('Sipariş eklenirken bir hata oluştu!', 'error');
    }
  }

  // Bildirim gösterme fonksiyonu
  function showNotification(message, type = 'info') {
    // Mevcut bildirimi kaldır
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
      existingNotification.remove();
    }

    // Yeni bildirim oluştur
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
      <span class="material-symbols-outlined">
        ${type === 'success' ? 'check_circle' : type === 'error' ? 'error' : 'info'}
      </span>
      ${message}
    `;

    // Bildirim stilini ekle
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${type === 'success' ? '#22c55e' : type === 'error' ? '#ef4444' : '#3b82f6'};
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      animation: slideIn 0.3s ease-out;
    `;

    // Animasyon CSS'i ekle (sadece bir kez)
    if (!document.querySelector('#notification-styles')) {
      const style = document.createElement('style');
      style.id = 'notification-styles';
      style.textContent = `
        @keyframes slideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
          from { transform: translateX(0); opacity: 1; }
          to { transform: translateX(100%); opacity: 0; }
        }
      `;
      document.head.appendChild(style);
    }

    document.body.appendChild(notification);

    // 3 saniye sonra kaldır
    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease-in';
      setTimeout(() => {
        if (notification.parentNode) {
          notification.remove();
        }
      }, 300);
    }, 3000);
  }

  // Sipariş işlemleri
  function viewInvoice(orderId) {
    console.log('Fatura görüntüleniyor:', orderId);
    showNotification('Fatura görüntüleme özelliği geliştiriliyor...', 'info');
  }

  function trackOrder(orderId) {
    console.log('Sipariş takip ediliyor:', orderId);
    showNotification('Kargo takip özelliği geliştiriliyor...', 'info');
  }

  function reviewProduct(productId) {
    console.log('Ürün değerlendiriliyor:', productId);
    showNotification('Değerlendirme özelliği geliştiriliyor...', 'info');
  }

  function returnProduct(productId) {
    console.log('Ürün iade ediliyor:', productId);
    showNotification('İade özelliği geliştiriliyor...', 'info');
  }

  // Authentication state değişikliklerini dinle
  authStateListenerWeb((firebaseUser) => {
    if (firebaseUser) {
      // Kullanıcı giriş yapmış, siparişleri yükle
      setTimeout(() => {
        loadOrders();
        initializeFilters();
      }, 500); // Firebase user objesi güncellenmesi için biraz bekle
    } else {
      // Kullanıcı giriş yapmamış
      document.getElementById('ordersList').innerHTML =
        '<div class="no-orders">Siparişlerinizi görmek için giriş yapmanız gerekiyor.</div>';
    }
  });

  // Filtreleri başlat
  function initializeFilters() {
    const dateFilter = document.querySelector('#date-filter');
    const statusFilter = document.querySelector('#status-filter');
    const searchInput = document.querySelector('#search-input');

    if (dateFilter) {
      dateFilter.addEventListener('change', function () {
        handleDateFilterChange(this.value);
      });
    }

    if (statusFilter) {
      statusFilter.addEventListener('change', function () {
        handleStatusFilterChange(this.value);
      });
    }

    if (searchInput) {
      let searchTimeout;
      searchInput.addEventListener('input', function () {
        clearTimeout(searchTimeout);
        const query = this.value.trim();

        // Clear butonu göster/gizle
        const clearBtn = document.querySelector('#clear-search');
        if (clearBtn) {
          clearBtn.style.display = query ? 'block' : 'none';
        }

        // 300ms bekle, sonra ara
        searchTimeout = setTimeout(() => {
          handleSearchInput(query);
        }, 300);
      });
    }
  }

  // Tarih filtresi değişikliği
  function handleDateFilterChange(filterValue) {
    const dateRangeGroup = document.querySelector('#date-range-group');

    if (filterValue === 'custom') {
      dateRangeGroup.style.display = 'flex';
    } else {
      dateRangeGroup.style.display = 'none';
      applyPredefinedDateFilter(filterValue);
    }
  }

  // Önceden tanımlı tarih filtresi uygula
  function applyPredefinedDateFilter(filterValue) {
    const now = new Date();
    let startDate = null;

    switch (filterValue) {
      case '1week':
        startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
        break;
      case '1month':
        startDate = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
        break;
      case '3months':
        startDate = new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000);
        break;
      case '6months':
        startDate = new Date(now.getTime() - 180 * 24 * 60 * 60 * 1000);
        break;
      case '1year':
        startDate = new Date(now.getTime() - 365 * 24 * 60 * 60 * 1000);
        break;
      case 'all':
      default:
        startDate = null;
        break;
    }

    filterOrdersByDate(startDate, null);
  }

  // Özel tarih aralığı uygula
  function applyDateFilter() {
    const startDateInput = document.querySelector('#start-date');
    const endDateInput = document.querySelector('#end-date');

    const startDate = startDateInput.value ? new Date(startDateInput.value) : null;
    const endDate = endDateInput.value ? new Date(endDateInput.value + 'T23:59:59') : null;

    if (startDate && endDate && startDate > endDate) {
      showNotification('Başlangıç tarihi bitiş tarihinden küçük olmalıdır!', 'error');
      return;
    }

    filterOrdersByDate(startDate, endDate);
    showNotification('Tarih filtresi uygulandı!', 'success');
  }

  // Siparişleri tarihe göre filtrele
  function filterOrdersByDate(startDate, endDate) {
    const orderItems = document.querySelectorAll('.order-item');

    orderItems.forEach(orderItem => {
      const orderDateText = orderItem.querySelector('.order-date').textContent;
      const orderDate = parseOrderDate(orderDateText);

      let shouldShow = true;

      if (startDate && orderDate < startDate) {
        shouldShow = false;
      }

      if (endDate && orderDate > endDate) {
        shouldShow = false;
      }

      orderItem.style.display = shouldShow ? 'block' : 'none';
    });
  }

  // Sipariş tarihini parse et
  function parseOrderDate(dateText) {
    // "10 Mart 2024" formatını Date objesine çevir
    const months = {
      'Ocak': 0, 'Şubat': 1, 'Mart': 2, 'Nisan': 3, 'Mayıs': 4, 'Haziran': 5,
      'Temmuz': 6, 'Ağustos': 7, 'Eylül': 8, 'Ekim': 9, 'Kasım': 10, 'Aralık': 11
    };

    const parts = dateText.split(' ');
    if (parts.length === 3) {
      const day = parseInt(parts[0]);
      const month = months[parts[1]];
      const year = parseInt(parts[2]);

      if (month !== undefined) {
        return new Date(year, month, day);
      }
    }

    return new Date();
  }

  // Durum filtresi değişikliği
  function handleStatusFilterChange(status) {
    applyStatusFilter(status);
    updateFilterSummary();
  }

  // Durum filtresini uygula
  function applyStatusFilter(status) {
    const orderItems = document.querySelectorAll('.order-item');

    orderItems.forEach(orderItem => {
      const orderStatus = orderItem.querySelector('.order-status');
      if (orderStatus) {
        const itemStatus = orderStatus.classList[1]; // delivered, processing, etc.
        const shouldShow = status === 'all' || itemStatus === status;
        orderItem.style.display = shouldShow ? 'block' : 'none';
      }
    });
  }

  // Arama işlevi
  function handleSearchInput(query) {
    if (!query) {
      // Arama boşsa tüm siparişleri göster
      const orderItems = document.querySelectorAll('.order-item');
      orderItems.forEach(item => {
        item.style.display = 'block';
      });
    } else {
      performSearch(query);
    }
    updateFilterSummary();
  }

  // Arama yap
  function performSearch(query) {
    const orderItems = document.querySelectorAll('.order-item');
    const searchQuery = query.toLowerCase();

    orderItems.forEach(orderItem => {
      const orderNumber = orderItem.querySelector('.order-number')?.textContent?.toLowerCase() || '';
      const productTitles = Array.from(orderItem.querySelectorAll('.product-title')).map(el => el.textContent.toLowerCase()).join(' ');
      const productSellers = Array.from(orderItem.querySelectorAll('.product-seller')).map(el => el.textContent.toLowerCase()).join(' ');
      const statusText = orderItem.querySelector('.order-status')?.textContent?.toLowerCase() || '';

      const searchText = `${orderNumber} ${productTitles} ${productSellers} ${statusText}`;
      const shouldShow = searchText.includes(searchQuery);

      orderItem.style.display = shouldShow ? 'block' : 'none';
    });
  }

  // Aramayı temizle
  function clearSearch() {
    const searchInput = document.querySelector('#search-input');
    const clearBtn = document.querySelector('#clear-search');

    if (searchInput) {
      searchInput.value = '';
    }
    if (clearBtn) {
      clearBtn.style.display = 'none';
    }

    // Tüm siparişleri göster
    handleSearchInput('');
    showNotification('Arama temizlendi', 'info');
  }

  // Tüm filtreleri sıfırla
  function resetAllFilters() {
    // Form elementlerini sıfırla
    const dateFilter = document.querySelector('#date-filter');
    const statusFilter = document.querySelector('#status-filter');
    const searchInput = document.querySelector('#search-input');
    const startDate = document.querySelector('#start-date');
    const endDate = document.querySelector('#end-date');
    const dateRangeGroup = document.querySelector('#date-range-group');
    const clearBtn = document.querySelector('#clear-search');

    if (dateFilter) dateFilter.value = 'all';
    if (statusFilter) statusFilter.value = 'all';
    if (searchInput) searchInput.value = '';
    if (startDate) startDate.value = '';
    if (endDate) endDate.value = '';
    if (dateRangeGroup) dateRangeGroup.style.display = 'none';
    if (clearBtn) clearBtn.style.display = 'none';

    // Tüm siparişleri göster
    const orderItems = document.querySelectorAll('.order-item');
    orderItems.forEach(item => {
      item.style.display = 'block';
    });

    updateFilterSummary();
    showNotification('Tüm filtreler temizlendi', 'success');
  }

  // Filtre özetini güncelle
  function updateFilterSummary() {
    const filterSummary = document.querySelector('#filter-summary');
    const activeFiltersContainer = document.querySelector('#active-filters');

    if (!filterSummary || !activeFiltersContainer) return;

    const activeFilters = [];

    // Durum filtresi kontrolü
    const statusFilter = document.querySelector('#status-filter');
    if (statusFilter && statusFilter.value !== 'all') {
      const statusText = statusFilter.options[statusFilter.selectedIndex].text;
      activeFilters.push({
        type: 'status',
        text: `Durum: ${statusText}`,
        value: statusFilter.value
      });
    }

    // Tarih filtresi kontrolü
    const dateFilter = document.querySelector('#date-filter');
    if (dateFilter && dateFilter.value !== 'all') {
      const dateText = dateFilter.options[dateFilter.selectedIndex].text;
      activeFilters.push({
        type: 'date',
        text: `Tarih: ${dateText}`,
        value: dateFilter.value
      });
    }

    // Arama kontrolü
    const searchInput = document.querySelector('#search-input');
    if (searchInput && searchInput.value.trim()) {
      activeFilters.push({
        type: 'search',
        text: `Arama: "${searchInput.value.trim()}"`,
        value: searchInput.value.trim()
      });
    }

    if (activeFilters.length > 0) {
      activeFiltersContainer.innerHTML = activeFilters.map(filter => `
        <span class="filter-tag">
          ${filter.text}
          <span class="remove-filter material-symbols-outlined" onclick="removeFilter('${filter.type}', '${filter.value}')">
            close
          </span>
        </span>
      `).join('');
      filterSummary.style.display = 'block';
    } else {
      filterSummary.style.display = 'none';
    }
  }

  // Tek filtreyi kaldır
  function removeFilter(type, value) {
    switch (type) {
      case 'status':
        const statusFilter = document.querySelector('#status-filter');
        if (statusFilter) statusFilter.value = 'all';
        applyStatusFilter('all');
        break;
      case 'date':
        const dateFilter = document.querySelector('#date-filter');
        if (dateFilter) dateFilter.value = 'all';
        const dateRangeGroup = document.querySelector('#date-range-group');
        if (dateRangeGroup) dateRangeGroup.style.display = 'none';
        filterOrdersByDate(null, null);
        break;
      case 'search':
        clearSearch();
        break;
    }
    updateFilterSummary();
  }
</script>
</div>
</div>


<script>
  // Firebase'den kullanıcı bilgilerini yükle
  async function loadUserProfile() {
    try {
      // Global user objesini kontrol et
      const currentUser = window.user || {};

      if (!currentUser.isLoggedIn || !currentUser.id) {
        document.getElementById('userName').textContent = 'Admin Kullanıcı';

        // Varsayılan avatar
        const avatarUrl = `https://ui-avatars.com/api/?name=Admin&background=007bff&color=fff&size=40`;
        document.getElementById('userAvatar').style.backgroundImage = `url(${avatarUrl})`;
        document.getElementById('userAvatar').style.backgroundSize = 'cover';
        document.getElementById('userAvatar').style.backgroundPosition = 'center';
        return;
      }

      // Firebase'den kullanıcı bilgilerini almaya çalış
      if (typeof dataListWeb === 'function') {
        try {
          const userSnapshot = await dataListWeb(`users`);
          let userData = null;

          // Kullanıcıyı ID ile bul
          userSnapshot.forEach(doc => {
            if (doc.id === currentUser.id) {
              userData = doc.data();
            }
          });

          if (userData) {
            // Kullanıcı adını güncelle
            const fullName = `${userData.firstName || ''} ${userData.lastName || ''}`.trim();
            document.getElementById('userName').textContent = fullName || userData.email || currentUser.email || 'Kullanıcı';

            // Profil fotoğrafını güncelle
            const avatarElement = document.getElementById('userAvatar');
            if (userData.photoURL) {
              avatarElement.style.backgroundImage = `url(${userData.photoURL})`;
              avatarElement.style.backgroundSize = 'cover';
              avatarElement.style.backgroundPosition = 'center';
            } else {
              // UI Avatars ile otomatik avatar oluştur
              const displayName = fullName || userData.email || currentUser.email || 'U';
              const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=random&color=fff&size=40`;
              avatarElement.style.backgroundImage = `url(${avatarUrl})`;
              avatarElement.style.backgroundSize = 'cover';
              avatarElement.style.backgroundPosition = 'center';
            }
          } else {
            // Kullanıcı verisi bulunamazsa email'den isim çıkar
            const displayName = currentUser.email ? currentUser.email.split('@')[0] : currentUser.name || 'Kullanıcı';
            document.getElementById('userName').textContent = displayName;

            // Varsayılan avatar
            const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=random&color=fff&size=40`;
            document.getElementById('userAvatar').style.backgroundImage = `url(${avatarUrl})`;
            document.getElementById('userAvatar').style.backgroundSize = 'cover';
            document.getElementById('userAvatar').style.backgroundPosition = 'center';
          }
        } catch (fbError) {
          console.log('Firebase veri çekme hatası:', fbError);
          // Firebase hatası varsa localStorage'daki bilgileri kullan
          const displayName = currentUser.email ? currentUser.email.split('@')[0] : currentUser.name || 'Kullanıcı';
          document.getElementById('userName').textContent = displayName;

          const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=007bff&color=fff&size=40`;
          document.getElementById('userAvatar').style.backgroundImage = `url(${avatarUrl})`;
          document.getElementById('userAvatar').style.backgroundSize = 'cover';
          document.getElementById('userAvatar').style.backgroundPosition = 'center';
        }
      } else {
        // dataListWeb fonksiyonu yoksa localStorage bilgilerini kullan
        const displayName = currentUser.email ? currentUser.email.split('@')[0] : currentUser.name || 'Kullanıcı';
        document.getElementById('userName').textContent = displayName;

        const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=007bff&color=fff&size=40`;
        document.getElementById('userAvatar').style.backgroundImage = `url(${avatarUrl})`;
        document.getElementById('userAvatar').style.backgroundSize = 'cover';
        document.getElementById('userAvatar').style.backgroundPosition = 'center';
      }

    } catch (error) {
      console.error('Kullanıcı profili yüklenirken hata:', error);
      document.getElementById('userName').textContent = 'Admin Kullanıcı';

      const avatarUrl = `https://ui-avatars.com/api/?name=Admin&background=dc3545&color=fff&size=40`;
      document.getElementById('userAvatar').style.backgroundImage = `url(${avatarUrl})`;
      document.getElementById('userAvatar').style.backgroundSize = 'cover';
      document.getElementById('userAvatar').style.backgroundPosition = 'center';
    }
  }

  // Admin sayfası için authentication kontrolü
  function checkAdminAccess() {
    const loadingOverlay = document.getElementById('adminLoadingOverlay');
    const mainContent = document.getElementById('adminMainContent');

    // Önce localStorage'dan user bilgisini kontrol et
    try {
      const storedUser = localStorage.getItem('user');
      if (storedUser) {
        const userData = JSON.parse(storedUser);
        if (userData.isLoggedIn && userData.id) {
          console.log('User authenticated from localStorage:', userData.id);

          // Loading ekranını gizle ve ana içeriği göster
          setTimeout(() => {
            loadingOverlay.style.display = 'none';
            mainContent.style.display = 'flex';

            // Global user objesini güncelle
            if (typeof window.user === 'undefined') {
              window.user = userData;
            }

            // Profil bilgilerini yükle
            loadUserProfile();
          }, 500);
          return;
        }
      }
    } catch (error) {
      console.log('localStorage user kontrolü hatası:', error);
    }

    // Firebase authentication kontrolü (eğer authStateListenerWeb fonksiyonu varsa)
    if (typeof authStateListenerWeb === 'function') {
      authStateListenerWeb((firebaseUser) => {
        if (firebaseUser) {
          // Kullanıcı giriş yapmış
          console.log('User authenticated for admin panel:', firebaseUser.uid);

          // Loading ekranını gizle ve ana içeriği göster
          setTimeout(() => {
            loadingOverlay.style.display = 'none';
            mainContent.style.display = 'flex';

            // Global user objesini güncelle
            if (typeof window.user === 'undefined') {
              window.user = {
                id: firebaseUser.uid,
                email: firebaseUser.email,
                isLoggedIn: true
              };
            }

            // Profil bilgilerini yükle
            loadUserProfile();
          }, 1000);

        } else {
          // Kullanıcı giriş yapmamış - login sayfasına yönlendir
          console.log('User not authenticated, redirecting to login...');

          setTimeout(() => {
            window.location.href = '/tr/login/';
          }, 1500);
        }
      });
    } else {
      // authStateListenerWeb fonksiyonu yoksa, doğrudan ana içeriği göster
      console.log('authStateListenerWeb not available, showing admin content directly');

      setTimeout(() => {
        loadingOverlay.style.display = 'none';
        mainContent.style.display = 'flex';

        // Varsayılan user objesi
        if (typeof window.user === 'undefined') {
          window.user = {
            id: 'demo_user',
            email: 'admin@demo.com',
            isLoggedIn: true
          };
        }

        loadUserProfile();
      }, 500);
    }
  }

  // Firebase fonksiyonları mock'ları (eğer yüklü değilse)
  function initializeFirebaseMocks() {
    if (typeof dataListWeb === 'undefined') {
      console.log('Firebase fonksiyonları bulunamadı, mock fonksiyonlar oluşturuluyor...');

      window.dataListWeb = async function (collection) {
        console.log('Mock dataListWeb çağrıldı:', collection);
        return {
          empty: true,
          forEach: function (callback) {
            // Boş collection
          }
        };
      };

      window.dataAddWeb = async function (collection, data) {
        console.log('Mock dataAddWeb çağrıldı:', collection, data);
        return { id: 'mock_' + Date.now() };
      };

      window.dataUpdateWeb = async function (collection, id, data) {
        console.log('Mock dataUpdateWeb çağrıldı:', collection, id, data);
        return true;
      };

      window.dataDeleteWeb = async function (collection, id) {
        console.log('Mock dataDeleteWeb çağrıldı:', collection, id);
        return true;
      };

      window.authStateListenerWeb = function (callback) {
        console.log('Mock authStateListenerWeb çağrıldı');
        // Varsayılan olarak giriş yapmış user döndür
        setTimeout(() => {
          callback({
            uid: 'mock_user_id',
            email: 'admin@demo.com'
          });
        }, 100);
      };
    }
  }

  // Mock fonksiyonları başlat
  initializeFirebaseMocks();

  // Sayfa yüklendiğinde admin erişim kontrolü yap
  checkAdminAccess();
</script>
</div>
  <div id="footer"><!-- Google Material Icons -->
<link
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet"
/>

<!-- Güven Kutuları Alanı -->
<div class="etv6o-trust-boxes">
      <div class="etv6o-trust-item">
        <span class="material-icons">account_balance_wallet</span>
        <div class="etv6o-trust-text">
          <div class="etv6o-trust-title">100% Güvenli Ödeme</div>
          <div class="etv6o-trust-desc">3D Secure ile Güvenli Ödeme</div>
        </div>
      </div>
    
      <div class="etv6o-trust-item">
        <span class="material-icons">inventory_2</span>
        <div class="etv6o-trust-text">
          <div class="etv6o-trust-title">%100 Orijinal Ürün</div>
          <div class="etv6o-trust-desc">%100 Lisanslı Orijinal Ürün ile Etkinleştirme</div>
        </div>
      </div>
    
      <div class="etv6o-trust-item">
        <span class="material-icons">local_shipping</span>
        <div class="etv6o-trust-text">
          <div class="etv6o-trust-title">Hızlı Teslimat</div>
          <div class="etv6o-trust-desc">Tüm Alışverişlerinizde Online Hızlı Teslimat</div>
        </div>
      </div>
    </div>

<!-- CSS -->

<footer class="footer">
  <div class="waves">
    <div class="wave" id="wave1"></div>
    <div class="wave" id="wave2"></div>
    <div class="wave" id="wave3"></div>
    <div class="wave" id="wave4"></div>
  </div>
  <ul class="social-icon">



    
    

 


    <li class="social-icon__item">
      <a class="social-icon__link" href="#">
        <ion-icon name="logo-facebook"></ion-icon>
      </a>
    </li>
    <li class="social-icon__item">
      <a class="social-icon__link" href="#">
        <ion-icon name="logo-x"></ion-icon>
      </a>
    </li>
    <li class="social-icon__item">
      <a class="social-icon__link" href="#">
        <ion-icon name="logo-linkedin"></ion-icon>
      </a>
    </li>
    <li class="social-icon__item">
      <a class="social-icon__link" href="#">
        <ion-icon name="logo-instagram"></ion-icon>
      </a>
    </li>
  </ul>
  <ul class="menu">
    <li class="menu__item"><a class="menu__link" href="/tr">Anasayfa</a></li><li class="menu__item"><a class="menu__link" href="/tr/bakir-mutfak-esyalari">Bakır Mutfak Eşyaları</a></li><li class="menu__item"><a class="menu__link" href="/tr/bakir-aksesuarlar">Bakır Aksesuarlar</a></li><li class="menu__item"><a class="menu__link" href="/tr/ehli-keyf">Ehli Keyf</a></li><li class="menu__item"><a class="menu__link" href="/tr/urunlerimiz">Kampanyalı</a></li><li class="menu__item"><a class="menu__link" href="/tr/yerelurunler">Yerel Ürünler</a></li><li class="menu__item"><a class="menu__link" href="/tr/kurumsal">Kurumsal</a></li><li class="menu__item"><a class="menu__link" href="/tr/iletisim">İletişim</a></li>
  </ul>
  <p>Tiggergift 2025 cognite. &copy;</p>
</footer>

<a
  href="https://api.whatsapp.com/send/?phone=905320000000&text=&app_absent=0"
  target="_blank"
  class="whatsapp"
>
  <div class="whatsappicon">
    <svg
      _ngcontent-cty-c90=""
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 32 32"
      class="wa-messenger-svg-whatsapp wh-svg-icon"
    >
      <path
        _ngcontent-cty-c90=""
        d=" M19.11 17.205c-.372 0-1.088 1.39-1.518 1.39a.63.63 0 0 1-.315-.1c-.802-.402-1.504-.817-2.163-1.447-.545-.516-1.146-1.29-1.46-1.963a.426.426 0 0 1-.073-.215c0-.33.99-.945.99-1.49 0-.143-.73-2.09-.832-2.335-.143-.372-.214-.487-.6-.487-.187 0-.36-.043-.53-.043-.302 0-.53.115-.746.315-.688.645-1.032 1.318-1.06 2.264v.114c-.015.99.472 1.977 1.017 2.78 1.23 1.82 2.506 3.41 4.554 4.34.616.287 2.035.888 2.722.888.817 0 2.15-.515 2.478-1.318.13-.33.244-.73.244-1.088 0-.058 0-.144-.03-.215-.1-.172-2.434-1.39-2.678-1.39zm-2.908 7.593c-1.747 0-3.48-.53-4.942-1.49L7.793 24.41l1.132-3.337a8.955 8.955 0 0 1-1.72-5.272c0-4.955 4.04-8.995 8.997-8.995S25.2 10.845 25.2 15.8c0 4.958-4.04 8.998-8.998 8.998zm0-19.798c-5.96 0-10.8 4.842-10.8 10.8 0 1.964.53 3.898 1.546 5.574L5 27.176l5.974-1.92a10.807 10.807 0 0 0 16.03-9.455c0-5.958-4.842-10.8-10.802-10.8z"
        fill-rule="evenodd"
      ></path>
    </svg>
  </div>
  Bize Ulaşın
</a>

</div>
</body>

<link rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />



<script type="text/javascript" src="/src/js.js?v=oox6t"></script>
<script src="/src/cookie.js?v=oox6t"></script>

</html>
